<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SUNVO Used Cars — Buy & Sell</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <a class="brand" href="#">SUNVO Cars</a>
      <nav class="nav">
        <a href="#home">Home</a>
        <a href="#inventory">Inventory</a>
        <a href="#sell">Sell</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
        <a href="#login" class="btn small">Login</a>
      </nav>
      <button class="nav-toggle" aria-label="open navigation">☰</button>
    </div>
  </header>

  <main>
    <section id="home" class="hero container">
      <div class="hero-content">
        <h1>Find your next used car</h1>
        <p>Hand-picked, inspected, and ready to drive. Search by make, city, price and more.</p>
        <a href="#inventory" class="btn">Browse Inventory</a>
      </div>
      <div class="hero-illu">
        <!-- decorative illustration placeholder -->
      </div>
    </section>
    
    <section id="about" class="container">
      <h2>About SUNVO Cars</h2>
      <p>We list quality used cars from trusted sellers.</p>
    </section>

    <section id="inventory" class="container cards">
      <h2>Available Cars</h2>
      <div class="filters">
        <input id="q-make" placeholder="Filter by make (e.g. Honda)" />
        <select id="q-city"><option value="">All cities</option></select>
        <input id="q-maxprice" placeholder="Max price (₹)" type="number" />
        <button id="q-clear" class="btn ghost">Clear</button>
      </div>
      <div id="car-list" class="card-grid">
        <p>Loading inventory...</p>
      </div>
    </section>

    <section id="sell" class="container form-card">
      <h2>Sell Your Car</h2>
      <form id="sell-form">
        <label>Name <input name="name" required></label>
        <label>Email <input name="email" type="email" required></label>
        <label>Make & Model <input name="make" required></label>
        <label>Year <input name="year" type="number" min="1980" max="2025" required></label>
        <label>Expected Price (₹) <input name="price" type="number" required></label>
        <label>City <input name="city" required></label>
        <button type="submit" class="btn">Submit Listing</button>
      </form>
      <div id="sell-result" class="result"></div>
    </section>

    <section id="contact" class="container form-card">
      <h2>Contact Us</h2>
      <form id="contact-form">
        <label>Name <input name="name" required></label>
        <label>Email <input name="email" type="email" required></label>
        <label>Message <textarea name="message" rows="4" required></textarea></label>
        <button type="submit" class="btn">Send</button>
      </form>
      <div id="contact-result" class="result"></div>
    </section>

    <section id="login" class="container form-card">
      <h2>User Login</h2>
      <form id="login-form" autocomplete="off">
        <label>Username <input name="user" required></label>
        <label>Password <input name="pwd" type="password" required minlength="4"></label>
        <div class="form-actions">
          <button type="submit" class="btn">Login</button>
          <button type="button" id="demo-fill" class="btn ghost">Demo Fill</button>
        </div>
      </form>
      <div id="login-result" class="result"></div>
    </section>
  </main>


  <footer class="site-footer">
    <div class="container">
      <p>© SUNVO Cars — Demo site. Not for real transactions.</p>
      <small>Designed for learning: HTML, CSS, and XML integration example.</small>
    </div>
  </footer>

  <script>
    // Mobile nav toggle
    document.querySelector('.nav-toggle').addEventListener('click', ()=>{
      document.querySelector('.nav').classList.toggle('open');
    });

    // Parse cars.xml and render inventory
    function parseAndRenderCars(xmlText){
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, 'application/xml');
      const cars = Array.from(xml.querySelectorAll('car'));
      const container = document.getElementById('car-list');
      const citySelect = document.getElementById('q-city');
      container.innerHTML = '';
      // populate city filter
      const cities = new Set();
      cars.forEach(c => cities.add(c.querySelector('city')?.textContent || ''));
      // clear and add options
      citySelect.innerHTML = '<option value="">All cities</option>' + Array.from(cities).map(ci => `<option value="${ci}">${ci}</option>`).join('');

      if(cars.length === 0){ container.innerHTML = '<p>No cars available.</p>'; return; }

      function renderList(filtered){
        container.innerHTML = '';
        if(filtered.length === 0){ container.innerHTML = '<p>No cars match the filters.</p>'; return; }
        filtered.forEach(c =>{
          const id = c.getAttribute('id') || '';
          const make = c.querySelector('make')?.textContent || '—';
          const model = c.querySelector('model')?.textContent || '';
          const year = c.querySelector('year')?.textContent || '—';
          const km = c.querySelector('km')?.textContent || '—';
          const price = c.querySelector('price')?.textContent || '—';
          const city = c.querySelector('city')?.textContent || '—';
          const phone = c.querySelector('phone')?.textContent || '—';
          const img = c.querySelector('image')?.textContent || '';

          const card = document.createElement('article');
          card.className = 'card car-card';
          card.innerHTML = `
            <div class="car-media">
              <img src="${img}" alt="${make} ${model}" onerror="this.src='placeholder-car.png'" />
            </div>
            <div class="card-body">
              <h3>${make} ${model} <span class="muted">(${year})</span></h3>
              <p>Price: ₹${price} • ${km} km • ${city}</p>
              <p>Contact: ${phone}</p>
              <div class="card-actions"><button class="btn">View Details</button></div>
            </div>
          `;
          container.appendChild(card);
        });
      }

      // initial render
      renderList(cars);

      // filtering
      const makeInput = document.getElementById('q-make');
      const cityInput = citySelect;
      const priceInput = document.getElementById('q-maxprice');
      const clearBtn = document.getElementById('q-clear');

      function applyFilters(){
        const qMake = makeInput.value.trim().toLowerCase();
        const qCity = cityInput.value;
        const qPrice = Number(priceInput.value) || Infinity;
        const filtered = cars.filter(c =>{
          const make = (c.querySelector('make')?.textContent || '').toLowerCase();
          const city = c.querySelector('city')?.textContent || '';
          const price = Number(c.querySelector('price')?.textContent || 0);
          const makeMatch = qMake === '' || make.includes(qMake);
          const cityMatch = qCity === '' || city === qCity;
          const priceMatch = price <= qPrice;
          return makeMatch && cityMatch && priceMatch;
        });
        renderList(filtered);
      }

      [makeInput, cityInput, priceInput].forEach(el => el.addEventListener('input', applyFilters));
      clearBtn.addEventListener('click', ()=>{
        makeInput.value = '';
        cityInput.value = '';
        priceInput.value = '';
        renderList(cars);
      });
    }

    fetch('used.xml')
      .then(r => r.text())
      .then(text => parseAndRenderCars(text))
      .catch(()=> document.getElementById('car-list').innerHTML = '<p>Could not load inventory (check cars.xml).</p>');

    // Simple handlers for forms (demo only)
    document.getElementById('sell-form').addEventListener('submit', function(e){
      e.preventDefault();
      const data = Object.fromEntries(new FormData(this).entries());
      document.getElementById('sell-result').textContent = `Thanks ${data.name}. Your listing for ${data.make} (${data.year}) was received (demo).`;
      this.reset();
    });

    document.getElementById('login-form').addEventListener('submit', function(e){
      e.preventDefault();
      document.getElementById('login-result').textContent = 'Logged in (demo).';
    });

    document.getElementById('demo-fill').addEventListener('click', ()=>{
      document.getElementById('login-form').user.value = 'demo_user';
      document.getElementById('login-form').pwd.value = 'demo';
    });

    document.getElementById('contact-form').addEventListener('submit', function(e){
      e.preventDefault();
      const data = Object.fromEntries(new FormData(this).entries());
      document.getElementById('contact-result').textContent = 'Thank you, ' + data.name + '. (Demo only.)';
      this.reset();
    });
  </script>
</body>
</html>